bundle:
  name: dbrx-multi-agent-retail-intelligence

resources:
  jobs:
    fashion_retail_data_generation:
      name: "Fashion Retail Data Generation"
      tasks:
        - task_key: generate_data
          notebook_task:
            notebook_path: ./00-data/00-fashion-retail-data.ipynb
            source: WORKSPACE
          timeout_seconds: 3600
      email_notifications:
        on_failure:
          - ${workspace.current_user.userName}
    
    fashion_retail_cleanup:
      name: "Fashion Retail Table Cleanup"
      tasks:
        - task_key: cleanup_tables
          notebook_task:
            notebook_path: ./00-data/10-cleanup-notebook.py 
            source: WORKSPACE
          timeout_seconds: 1800  # 30 minutes should be enough for cleanup
      email_notifications:
        on_failure:
          - ${workspace.current_user.userName}

targets:
  dev:
    mode: development
    workspace:
      host: https://e2-demo-field-eng.cloud.databricks.com 
      root_path: /Workspace/Users/${workspace.current_user.userName}/ml/agent-bricks/multi-agent-retail-intelligence
